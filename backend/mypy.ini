[mypy]
# Python version
python_version = 3.11

# Strict mode settings - catches bugs like request.youtube_url
strict = false
warn_return_any = true
warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = true

# Allow attribute access on Any (needed for some dynamic libs)
# But still catch clear attribute errors
check_untyped_defs = true
no_implicit_optional = true

# Import handling
ignore_missing_imports = true
follow_imports = silent

# Show error codes for easier debugging
show_error_codes = true
show_column_numbers = true

# Exclude test files and migrations from strict checking
exclude = (?x)(
    ^tests/
    | ^alembic/
    | ^scripts/
  )

# Per-module configuration
[mypy-app.api.routes.*]
# Routes should have strict attribute checking to catch issues like request.youtube_url
disallow_untyped_defs = false
check_untyped_defs = true

[mypy-app.services.*]
disallow_untyped_defs = false
check_untyped_defs = true

[mypy-app.core.*]
disallow_untyped_defs = false
check_untyped_defs = true

# Third-party libraries without type stubs
[mypy-celery.*]
ignore_missing_imports = true

[mypy-qdrant_client.*]
ignore_missing_imports = true

[mypy-sentence_transformers.*]
ignore_missing_imports = true

[mypy-whisper.*]
ignore_missing_imports = true

[mypy-yt_dlp.*]
ignore_missing_imports = true

[mypy-anthropic.*]
ignore_missing_imports = true

[mypy-openai.*]
ignore_missing_imports = true

[mypy-tiktoken.*]
ignore_missing_imports = true

[mypy-stripe.*]
ignore_missing_imports = true

[mypy-resend.*]
ignore_missing_imports = true
